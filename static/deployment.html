<script>
  const eventSource = new EventSource("/logs/" + "${data.deployment_id}");
  let clientIdHeaderValue = "";

  eventSource.onopen = function (event) {
    clientIdHeaderValue = eventSource.url.split("=")[1]; // Extract client ID from the URL

    // Send a ping every 15 seconds to keep the connection alive
    setInterval(function () {
      fetch("/ping", {
        method: "POST",
        headers: {
          "X-Client-ID": clientIdHeaderValue,
        },
      });
    }, 15000);
  };
</script>
